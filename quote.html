<script>
  async function getDeliveryQuote() {
    const origin = document.getElementById('pickup').value;
    const destination = document.getElementById('dropoff').value;
    const quoteResult = document.getElementById('quoteResult');

    if (!origin || !destination) {
      quoteResult.style.display = 'block';
      quoteResult.innerText = "Please enter both pickup and drop-off locations.";
      return;
    }

    try {
      const response = await fetch(`/functions/quote?origins=${encodeURIComponent(origin)}&destinations=${encodeURIComponent(destination)}`);
      const data = await response.json();

      if (data.error) {
        quoteResult.style.display = 'block';
        quoteResult.innerText = "Unable to fetch quote. Please check the addresses.";
      } else {
        quoteResult.style.display = 'block';
        quoteResult.innerHTML = `
          <strong>Delivery Quote:</strong><br>
          From: ${data.origin} <br>
          To: ${data.destination} <br>
          Distance: ${data.distance} <br>
          Estimated Time: ${data.duration} <br>
          <strong>Price Estimate: $${data.price}</strong>
        `;
      }
    } catch (err) {
      quoteResult.style.display = 'block';
      quoteResult.innerText = "An error occurred. Please try again.";
    }
  }
</script>
